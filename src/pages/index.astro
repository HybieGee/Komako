---
import BaseLayout from '@layouts/BaseLayout.astro';
import GalleryGrid from '@components/GalleryGrid.astro';
import Lightbox from '@components/Lightbox.astro';
import ContractSection from '@components/ContractSection.astro';
import { getPhotos } from '@lib/content';

const photos = await getPhotos();
const featuredPhotos = photos.slice(0, 20);
const preloadImages = featuredPhotos.slice(0, 6).map(photo => photo.image);
---

<BaseLayout
  title="Komako Gallery - Scottish Fold Cat Photography"
  description="A beautiful gallery celebrating Komako, a Scottish Fold cat born March 26, 2021. Browse photos capturing her daily life and adorable moments."
>
  <!-- Preload critical images -->
  {preloadImages.map(src => (
    <link rel="preload" as="image" href={src} slot="head" />
  ))}
  <div class="container py-16">
    <!-- Hero Section -->
    <div class="text-center mb-20 relative overflow-hidden">
      <div class="absolute inset-0 opacity-30 pointer-events-none">
        <div class="absolute top-10 left-10 w-32 h-32 bg-accent-pink/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-10 right-10 w-40 h-40 bg-accent-rose/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
      </div>
      <div class="max-w-4xl mx-auto relative">
        <h1 class="text-5xl md:text-6xl font-serif font-bold text-komako-eyes mb-6 leading-tight">
          Welcome to
          <span class="bg-gradient-to-r from-accent-rose to-accent-pink bg-clip-text text-transparent">
            Komako's Gallery
          </span>
        </h1>
        
        <div class="max-w-2xl mx-auto mb-8">
          <p class="text-xl text-komako-soft font-medium mb-4">
            Scottish Fold â€¢ Born March 26, 2021
          </p>
          <p class="text-lg text-komako-cozy leading-relaxed">
            A photographic journey celebrating the daily life, personality, 
            and endless charm of our beloved Scottish Fold companion
          </p>
        </div>
        
        <div class="flex flex-wrap justify-center gap-4">
          <a href="#gallery" class="btn-primary">
            Explore Gallery
          </a>
          <a href="/about" class="btn-secondary">
            About Komako
          </a>
        </div>
      </div>
    </div>

    <!-- Gallery Section -->
    <section id="gallery" class="mb-20">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-serif font-bold text-komako-eyes mb-4">Recent Photos</h2>
        <p class="text-komako-soft max-w-2xl mx-auto">
          The latest captures from Komako's daily adventures and quiet moments
        </p>
        <div class="w-16 h-0.5 bg-gradient-to-r from-accent-rose to-accent-pink mx-auto mt-6"></div>
      </div>
      
      <GalleryGrid photos={featuredPhotos} />
      
      {photos.length > 20 && (
        <div class="text-center mt-12">
          <a href="/timeline" class="btn-primary">
            View All Photos
          </a>
        </div>
      )}
    </section>

    <!-- Token Section -->
    <ContractSection />

    <!-- Stats Section -->
    <section class="mt-20 bg-white/60 backdrop-blur-sm rounded-2xl p-8 border border-komako-light/50 shadow-md">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
        <div class="space-y-2">
          <div class="text-3xl font-serif font-bold text-accent-rose">{photos.length}</div>
          <div class="text-komako-soft font-medium">Photos Captured</div>
        </div>
        <div class="space-y-2">
          <div class="text-3xl font-serif font-bold text-accent-rose">3+</div>
          <div class="text-komako-soft font-medium">Years Together</div>
        </div>
        <div class="space-y-2">
          <div class="text-3xl font-serif font-bold text-accent-rose">Daily</div>
          <div class="text-komako-soft font-medium">New Memories</div>
        </div>
      </div>
    </section>
  </div>
  
  <Lightbox />
</BaseLayout>