---
import BaseLayout from '@layouts/BaseLayout.astro';
import GalleryGrid from '@components/GalleryGrid.astro';
import Lightbox from '@components/Lightbox.astro';
import ContractSection from '@components/ContractSection.astro';
import { getPhotos } from '@lib/content';
import { useTranslations } from '@lib/i18n';

const lang = 'ja';
const t = useTranslations(lang);

const photos = await getPhotos(lang);
const featuredPhotos = photos.slice(0, 20);
const preloadImages = featuredPhotos.slice(0, 6).map(photo => photo.image);
---

<BaseLayout
  title="コマコギャラリー - スコティッシュフォールドの猫の写真"
  description="2021年3月26日生まれのスコティッシュフォールド、コマコを祝う美しいギャラリー。彼女の日常生活と愛らしい瞬間をご覧ください。"
  lang={lang}
>
  <!-- Preload critical images -->
  {preloadImages.map(src => (
    <link rel="preload" as="image" href={src} slot="head" />
  ))}
  <div class="container py-16">
    <!-- Hero Section -->
    <div class="text-center mb-20 relative overflow-hidden">
      <div class="absolute inset-0 opacity-30 pointer-events-none">
        <div class="absolute top-10 left-10 w-32 h-32 bg-accent-pink/20 rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-10 right-10 w-40 h-40 bg-accent-rose/20 rounded-full blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
      </div>
      <div class="max-w-4xl mx-auto relative">
        <h1 class="text-5xl md:text-6xl font-serif font-bold text-komako-eyes mb-6 leading-tight">
          <span class="bg-gradient-to-r from-accent-rose to-accent-pink bg-clip-text text-transparent">
            {t('home.title')}
          </span>
        </h1>
        
        <div class="max-w-2xl mx-auto mb-8">
          <p class="text-xl text-komako-soft font-medium mb-4">
            {t('home.subtitle')}
          </p>
          <p class="text-lg text-komako-cozy leading-relaxed">
            {t('home.description')}
          </p>
        </div>
        
        <div class="flex flex-wrap justify-center gap-4">
          <a href="#gallery" class="btn-primary">
            {t('home.explore')}
          </a>
          <a href="/ja/about" class="btn-secondary">
            {t('home.about')}
          </a>
        </div>
      </div>
    </div>

    <!-- Gallery Section -->
    <section id="gallery" class="mb-20">
      <div class="text-center mb-12">
        <h2 class="text-3xl font-serif font-bold text-komako-eyes mb-4">{t('home.recent')}</h2>
        <p class="text-komako-soft max-w-2xl mx-auto">
          {t('home.recent.desc')}
        </p>
        <div class="w-16 h-0.5 bg-gradient-to-r from-accent-rose to-accent-pink mx-auto mt-6"></div>
      </div>
      
      <GalleryGrid photos={featuredPhotos} />
      
      {photos.length > 20 && (
        <div class="text-center mt-12">
          <a href="/ja/timeline" class="btn-primary">
            {t('home.viewall')}
          </a>
        </div>
      )}
    </section>

    <!-- Token Section -->
    <ContractSection />

    <!-- Stats Section -->
    <section class="mt-20 bg-white/60 backdrop-blur-sm rounded-2xl p-8 border border-komako-light/50 shadow-md">
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
        <div class="space-y-2">
          <div class="text-3xl font-serif font-bold text-accent-rose">{photos.length}</div>
          <div class="text-komako-soft font-medium">{t('home.stats.photos')}</div>
        </div>
        <div class="space-y-2">
          <div class="text-3xl font-serif font-bold text-accent-rose">3+</div>
          <div class="text-komako-soft font-medium">{t('home.stats.years')}</div>
        </div>
        <div class="space-y-2">
          <div class="text-3xl font-serif font-bold text-accent-rose">{t('home.stats.daily')}</div>
          <div class="text-komako-soft font-medium">{t('home.stats.memories')}</div>
        </div>
      </div>
    </section>
  </div>
  
  <Lightbox />
</BaseLayout>