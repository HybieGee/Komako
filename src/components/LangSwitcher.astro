---
export interface Props {
  lang: 'en' | 'ja';
}

const { lang } = Astro.props;
const currentPath = Astro.url.pathname;

const getAlternatePath = () => {
  if (lang === 'en') {
    return `/ja${currentPath}`;
  } else {
    return currentPath.replace(/^\/ja/, '') || '/';
  }
};

const alternatePath = getAlternatePath();
---

<div class="relative">
  <a
    href={alternatePath}
    class="inline-flex items-center justify-center w-20 h-10 rounded-full bg-komako-light hover:bg-komako-warm transition-all duration-300 border border-komako-cozy hover:border-accent-rose shadow-sm hover:shadow-md"
    aria-label={`Switch to ${lang === 'en' ? 'Japanese' : 'English'}`}
  >
    <div class="flex items-center space-x-1">
      <span class={`text-sm font-bold transition-colors ${lang === 'en' ? 'text-accent-rose' : 'text-komako-soft'}`}>
        EN
      </span>
      <div class="w-0.5 h-4 bg-komako-cozy"></div>
      <span class={`text-sm font-bold transition-colors ${lang === 'ja' ? 'text-accent-rose' : 'text-komako-soft'}`}>
        JA
      </span>
    </div>
    
    <!-- Toggle indicator -->
    <div class={`absolute top-1 bottom-1 w-8 rounded-full bg-accent-rose/20 backdrop-blur-sm transition-transform duration-300 ${lang === 'en' ? 'left-1 translate-x-0' : 'left-1 translate-x-10'}`}>
    </div>
  </a>
</div>