---
import { getLangFromUrl } from '@lib/i18n';

export interface Props {
  title: string;
  slug: string;
  date: string;
  excerpt: string;
  readTime?: string;
}

const { title, slug, date, excerpt, readTime } = Astro.props;
const lang = getLangFromUrl(Astro.url);

const formattedDate = new Date(date).toLocaleDateString(
  lang === 'ja' ? 'ja-JP' : 'en-US',
  {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }
);

const journalLink = lang === 'ja' ? `/ja/journal/${slug}` : `/journal/${slug}`;
---

<article class="card">
  <a href={journalLink} class="block">
    <h3 class="text-xl font-semibold hover:text-primary-600 dark:hover:text-primary-400">
      {title}
    </h3>
    <div class="mt-2 flex items-center gap-3 text-sm text-gray-500 dark:text-gray-400">
      <time>{formattedDate}</time>
      {readTime && (
        <>
          <span>&middot;</span>
          <span>{readTime}</span>
        </>
      )}
    </div>
    <p class="mt-3 text-gray-600 dark:text-gray-300">{excerpt}</p>
  </a>
</article>